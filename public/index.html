<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Chess vs Stockfish</title>
  <link rel="stylesheet" href="https://unpkg.com/@chrisoakman/chessboardjs@1.0.0/dist/chessboard-1.0.0.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet">
  <style>
  body {
    font-family: 'Roboto', sans-serif;
    max-width: 1200px;
    margin: 0 auto;
    padding: 20px;
    background-color: #f4f6f8;
  }

  .top-bar {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
  }

  .top-bar h1 {
    margin: 0;
  }

  .logout-btn {
    background: #d32f2f;
    color: white;
    padding: 8px 14px;
    border: none;
    border-radius: 4px;
    font-weight: bold;
    cursor: pointer;
    transition: background 0.2s ease;
  }

  .logout-btn:hover {
    background: #b71c1c;
  }

  .container {
    display: flex;
    gap: 20px;
    flex-wrap: wrap;
    justify-content: center;
  }

  .side-panel {
    flex: 0 0 220px;
    background: #ffffff;
    padding: 15px;
    border-radius: 8px;
    border: 1px solid #ddd;
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.05);
  }

  .board-container {
    flex: 1 1 400px;
    min-width: 350px;
    padding: 10px;
    background: #ffffff;
    border-radius: 8px;
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.05);
  }

  .game-controls {
    display: flex;
    gap: 20px;
    margin-top: 20px;
  }

  .button-group {
    margin: 15px 0;
  }

  button {
    padding: 8px 14px;
    border: none;
    background: #1976d2;
    color: white;
    border-radius: 4px;
    font-weight: bold;
    transition: background 0.2s ease;
    cursor: pointer;
  }

  button:hover {
    background: #125aa0;
  }

  .game-status {
    margin: 15px 0;
  }

  #move-list {
    min-height: 40px;
    font-family: monospace;
    background: #f9f9f9;
    border: 1px solid #eee;
    border-radius: 4px;
    padding: 8px;
    margin-top: 10px;
    white-space: normal;
    word-break: break-word;
    column-width: 180px;
    column-gap: 40px;
    max-height: 400px;
    overflow-y: auto;
  }

  #analysisResult {
    font-family: monospace;
    white-space: normal;
    word-break: break-word;
    column-width: 180px;
    column-gap: 40px;
    max-height: 400px;
    overflow-y: auto;
    margin-top: 10px;
  }

  .analysis-entry {
    padding: 10px;
    margin: 8px 0;
    border-radius: 4px;
    background: #fff;
    border-left: 4px solid #ccc;
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
    break-inside: avoid;
  }

  .good {
    border-left-color: #4CAF50;
    background-color: #e8f5e9;
  }

  .mistake {
    border-left-color: #FFC107;
    background-color: #fffde7;
  }

  .blunder {
    border-left-color: #F44336;
    background-color: #ffebee;
  }

  .suggestion {
    color: #666;
    font-size: 0.9em;
    margin-top: 4px;
  }

  .score {
    float: right;
    font-family: monospace;
    color: #444;
  }

  @media (max-width: 768px) {
    #move-list,
    #analysisResult {
      column-count: 1;
    }
  }
</style>
</head>

<body>
  <div class="top-bar">
    <h1>Chess vs Stockfish</h1>
    <button class="logout-btn" onclick="logout()">Logout</button>
  </div>

  <div class="container">
    <!-- Left: Player Info -->
    <div class="player-info side-panel">
      <h2>Player Information</h2>
      <p>Your Rating: <span id="playerRating">1200</span></p>
      <p>Stockfish Level: <span id="stockfishLevel">0</span></p>
      <p>Stockfish Depth: <span id="stockfishDepth">5</span></p>
    </div>

    <!-- Center: Board -->
    <div class="board-container">
      <div id="myBoard" style="width: 100%"></div>

      <div class="game-controls">
        <div class="button-group">
          <button id="startBtn">New Game</button>
          <button id="undoBtn">Undo Move</button>
          <button id="speakMoveBtn">üéôÔ∏è Speak Move</button>
        </div>
      </div>
    </div>

    <!-- Right: Status and Analysis -->
    <div class="info-container side-panel">
      <div class="game-status">
        <h2>Game Status</h2>
        <p class="status" id="status">Choose your color to start</p>
        <div class="button-group">
          <button id="playAsWhite">White</button>
          <button id="playAsBlack">Black</button>
        </div>

        <h2>Move History</h2>
        <div id="move-list"></div>

        <div class="analysis-controls">
          <button id="analyzeBtn" style="display:none;">Generate Analysis</button>
          <div id="analysisResult" class="analysis-output"></div>
        </div>
      </div>
    </div>
  </div>

  <script>
    function logout() {
      fetch('http://localhost:8080/logout', {
        method: 'POST',
        credentials: 'include'
      }).then(() => {
        window.location.href = "login.html";
      });
    }
  </script>

  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://unpkg.com/@chrisoakman/chessboardjs@1.0.0/dist/chessboard-1.0.0.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/chess.js/0.10.3/chess.min.js"></script>
  <script src="chessboardjs-themes.js"></script>
  <script type="module" src="main.js"></script>
</body>

</html>

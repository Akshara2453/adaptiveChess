<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Chess vs Stockfish</title>
    <link
      rel="stylesheet"
      href="https://unpkg.com/@chrisoakman/chessboardjs@1.0.0/dist/chessboard-1.0.0.min.css"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto&display=swap"
      rel="stylesheet"
    />
    <style>
      body {
        font-family: "Roboto", sans-serif;
        margin: 0;
        padding: 0;
        background-color: #000;
      }

      .navbar {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        z-index: 999;
        display: flex;
        justify-content: space-between;
        align-items: center;
        background-color: #000;
        color: white;
        padding: 14px 20px;
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3);
      }

      .navbar h1 {
        margin: 0;
        font-size: 1.5em;
      }

      .navbar-buttons {
        display: flex;
        gap: 10px;
        align-items: center;
      }

      .navbar button {
        background: white;
        color: black;
        padding: 6px 12px;
        border: none;
        border-radius: 4px;
        font-weight: bold;
        cursor: pointer;
        transition: background 0.2s ease;
      }

      .navbar button:hover {
        background: #e3e3e3;
      }

      .container {
        display: flex;
        align-items: flex-start;
        gap: 20px;
        padding: 20px;
        padding-top: 80px;
        width: fit-content;
        margin: 0 auto;
      }

      .board-container {
        width: 480px;
        padding: 10px;
        background: rgba(40, 40, 40, 0.85);
        border-radius: 8px;
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3);
        color: white;
      }

      .right-panel {
        width: 300px;
        display: flex;
        flex-direction: column;
        gap: 20px;
      }

      .side-panel {
        background: rgba(40, 40, 40, 0.85);
        padding: 15px;
        border-radius: 8px;
        border: 1px solid #444;
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3);
        color: white;
      }

      .game-controls {
        display: flex;
        gap: 20px;
        margin-top: 20px;
      }

      .button-group {
        margin: 15px 0;
      }

      button {
        padding: 8px 14px;
        border: none;
        background: #1976d2;
        color: white;
        border-radius: 4px;
        font-weight: bold;
        transition: background 0.2s ease;
        cursor: pointer;
      }

      button:hover {
        background: #125aa0;
      }

      .game-status {
        margin: 15px 0;
      }

      #move-list {
        height: 160px;
        overflow-y: auto;
        font-family: monospace;
        background: #222;
        border: 1px solid #555;
        border-radius: 4px;
        padding: 8px;
        margin-top: 10px;
        white-space: pre-wrap;
        word-break: break-word;
        color: white;
      }

      #move-list::-webkit-scrollbar {
        width: 8px;
      }

      #move-list::-webkit-scrollbar-track {
        background: #333;
      }

      #move-list::-webkit-scrollbar-thumb {
        background: #777;
        border-radius: 4px;
      }

      #move-list::-webkit-scrollbar-thumb:hover {
        background: #999;
      }

      .analysis-controls {
        margin-top: 20px;
      }

      .analysis-output {
        margin-top: 10px;
        max-height: 160px;
        overflow-y: auto;
        padding-right: 5px;
        color: white;
      }

      .analysis-entry {
        padding: 10px;
        margin: 8px 0;
        border-radius: 4px;
        background: #333;
        border-left: 4px solid #ccc;
        box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
      }

      .good {
        border-left-color: #4caf50;
        background-color: #2e4732;
      }

      .mistake {
        border-left-color: #ffc107;
        background-color: #4e4a28;
      }

      .blunder {
        border-left-color: #f44336;
        background-color: #5a2c2c;
      }

      .suggestion {
        color: #bbb;
        font-size: 0.9em;
        margin-top: 4px;
      }

      .score {
        float: right;
        font-family: monospace;
        color: #ccc;
      }

      #playerInfoPanel {
        display: none;
      }
    </style>
  </head>

  <body>
    <div class="navbar">
      <h1>AdaptiveChess</h1>
      <div class="navbar-buttons">
        <button onclick="toggleProfile()">Profile</button>
        <button class="logout-btn" onclick="logout()">Logout</button>
      </div>
    </div>

    <div class="container">
      <div class="board-container">
        <div id="myBoard" style="width: 100%"></div>

        <div class="game-controls">
          <div class="button-group">
            <button id="startBtn">New Game</button>
            <button id="undoBtn">Undo Move</button>
            <button id="speakMoveBtn">üéôÔ∏è Speak Move</button>
          </div>
        </div>
      </div>

      <div class="right-panel">
        <div id="playerInfoPanel" class="side-panel">
          <h2>Player Information</h2>
          <p>Your Rating: <span id="playerRating">1200</span></p>
          <p>Stockfish Level: <span id="stockfishLevel">0</span></p>
          <p>Stockfish Depth: <span id="stockfishDepth">5</span></p>
        </div>

        <div class="side-panel">
          <div class="game-status">
            <h2>Game Status</h2>
            <p class="status" id="status">Choose your color to start</p>
            <div class="button-group">
              <button id="playAsWhite">White</button>
              <button id="playAsBlack">Black</button>
            </div>

            <h2>Move History</h2>
            <div id="move-list"></div>

            <div class="analysis-controls">
              <button id="analyzeBtn" style="display: none">
                Generate Analysis
              </button>
              <div id="analysisResult" class="analysis-output">
                <!-- Dynamic move analysis -->
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script>
      function logout() {
        fetch("http://localhost:8080/logout", {
          method: "POST",
          credentials: "include",
        }).then(() => {
          window.location.href = "login.html";
        });
      }

      function toggleProfile() {
        const panel = document.getElementById("playerInfoPanel");
        panel.style.display =
          panel.style.display === "none" || panel.style.display === ""
            ? "block"
            : "none";
      }
    </script>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://unpkg.com/@chrisoakman/chessboardjs@1.0.0/dist/chessboard-1.0.0.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/chess.js/0.10.3/chess.min.js"></script>
    <script src="chessboardjs-themes.js"></script>
    <script type="module" src="main.js"></script>
  </body>
</html>
